---
import { urlFor } from "../../utils/sanityClient";

const { title, subtitle, image, slug, style, alt } = Astro.props;
---
<a class="project-card" data-style={style} href={`/work/${slug}`}>
  <img
    class="image"
    sizes={style == 'large' ? "60vw, (max-width: 768px) 100vw" : "33vw, (max-width: 768px) 50vw"}
    width="33vw"
    height="44vw"
    srcset={`
      ${urlFor(image).width(200).height(266).auto('format').url()} 200w,
      ${urlFor(image).width(400).height(533).auto('format').url()} 400w,
      ${urlFor(image).width(768).height(1024).auto('format').url()} 768w,
      ${urlFor(image).width(960).height(1280).auto('format').url()} 960w,
      ${urlFor(image).width(1280).height(1706).auto('format').url()} 1280w,
      ${urlFor(image).width(1440).height(1920).auto('format').url()} 1440w,
    `}
    loading="lazy"
    src={urlFor(image).url()} 
    alt={alt}
  />
  <div class="project-info">
    <h2 class="project-title h4">{title}</h2>
    <p class="project-subtitle">{subtitle}</p>
  </div>
</a>

<style>
  .project-card {
    aspect-ratio: 3 / 4;
    position: relative;
    border-radius: var(--radius-sm);
    overflow: hidden;
    display: flex;
    justify-content: stretch;
    align-items: stretch;
    grid-column: auto;
    grid-row: auto;
    /* flex-shrink: 0;
    flex-basis: auto; */
  }

  .project-card[data-style="large"] {
    grid-column: auto / span 2;
    grid-row: auto / span 2;
  }

  .image {
    width: 100%;
    height: 100%;
    /* inset: 0; */
    object-fit: cover;
    position: absolute;
    z-index: 0;
    scale: 1.05;
    transition: scale var(--anim-md);
  }

  .project-card:hover .image {
    scale: 1;
  }

  .project-info {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: var(--space-sm);
    color: var(--color-reverse);
  }

  @media screen and (max-width: 768px) {
    .work_project-card[data-style="large"] {
      grid-column: auto;
      grid-row: auto;
    }
  }
</style>