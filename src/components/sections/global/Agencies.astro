---
import SanityImage from "../../atoms/SanityImage.astro";
const { content } = Astro.props;
// console.log(content)
---
<section class="agencies">
  <div class="section-title" data-animate-viewport="true" data-animate-style="fade">
    <h2 class="heading">{content.heading}</h2>
  </div>
  <div class="text-blocks">
    {content.agencies.map((agency, i) => {
      return (
          <div class="text-block" data-animate-viewport="true" data-animate-style="fade-up" data-animate-delay={i * 100}>
            <a href={agency.linkURL} target="_blank" class="block-image">
              <SanityImage
                sizes="(max-width: 768px) 33vw, 25vw"
                image={agency.logo}
                alt={`Agency logo for ${agency.name}`} 
              />
            </a>
            <p class="description">{agency.description}</p>
          </div>
      )
    })}
  </div>
</section>

<style>
  .agencies {
    padding: var(--space-3xl) var(--page-margin);
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    gap: var(--space-2xl);
  }

  .section-title {
    flex: 1 0 auto;
  }

  .text-blocks {
    display: flex;
    flex-direction: row;
    gap: var(--space-md);
    justify-content: flex-end;
    flex: 0 1 50%;
  }

  .text-block {
    flex: 1 0 25%;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    gap: var(--space-md);
    max-width: 80ch;
  }

  .block-image {
    max-width: 60%;
    max-height: 60px;
    width: auto;
    /* width: 80%; */
    height: auto;
  }

  .description {
    color: var(--color-foreground-secondary);
  }

  @media screen and (max-width: 960px) {
    
    .agencies {
      flex-direction: column;
      justify-content: flex-start;
    }

    .text-blocks {
      flex-wrap: wrap;
      gap: var(--space-2xl);
      justify-content: flex-start;
    }

    .text-block {
      flex: 1 0 25%;
      margin: 0;
      min-width: 300px;
    }

    .block-image {
      /* max-height: 80px; */
    }
  }

</style>