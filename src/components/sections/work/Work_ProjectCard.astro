---
import { urlFor } from "../../../utils/sanityClient";

const { title, subtitle, image, slug, style } = Astro.props;
---
<article class="work_project-card" data-style={style}>
  <img
    class="image"
    sizes="33vw, (max-width: 768px) 50vw"
    width="33vw"
    height="44vw"
    srcset={`
      ${urlFor(image).width(200).height(266).auto('format').url} 200w,
      ${urlFor(image).width(400).height(533).auto('format').url} 400w,
      ${urlFor(image).width(768).height(1024).auto('format').url} 768w,
      ${urlFor(image).width(960).height(1280).auto('format').url} 960w,
    `}
    loading="lazy"
    src={urlFor(image).url()} 
  />
  <a class="project-info" href={`/work/${slug}`}>
    <h3 class="project-title h4">{title}</h1>
    <p class="project-subtitle">{subtitle}</p>
  </a>
</article>

<style>
  .work_project-card {
    aspect-ratio: 3 / 4;
    position: relative;
    border-radius: var(--radius-sm);
    overflow: hidden;
    display: flex;
    justify-content: stretch;
    align-items: stretch;
    grid-column: auto;
    grid-row: auto;
    /* flex-shrink: 0;
    flex-basis: auto; */
  }

  .work_project-card[data-style="large"] {
    grid-column: auto / span 2;
    grid-row: auto / span 2;
  }

  .image {
    width: 100%;
    height: 100%;
    /* inset: 0; */
    object-fit: cover;
    position: absolute;
    z-index: 0;
  }

  .project-info {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: var(--space-sm);
    color: var(--color-reverse);
  }

  @media screen and (max-width: 768px) {
    .work_project-card[data-style="large"] {
      grid-column: auto;
      grid-row: auto;
    }
  }
</style>