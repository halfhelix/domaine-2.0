---
import { sanityClient } from 'sanity:client';
import LayoutGlobal from './LayoutGlobal.astro';
import Header from '../components/domaine/sections/Header.astro';
import Footer from '../components/domaine/sections/Footer.astro';

interface Props {
	title: string;
	description?: string;
	image?: string;
	theme?: string;
    backgroundColor?: string;
    foregroundColor?: string;
}

const { title, description, image, theme, backgroundColor, foregroundColor } = Astro.props;

// SEO
const seoData = await sanityClient.fetch(`*[_type == "settings_SEO" && _id == "settings_SEO-domaine"]`)
const seoSettings = seoData[0]

// Header
const headerData = await sanityClient.fetch(`*[_type == "settings_header-domaine"]`)
const headerSettings = headerData[0]

// Footer
const footerData = await sanityClient.fetch(`*[_type == "settings_footer-domaine"]`)
const footerSettings = footerData[0]

// Styling
import '../styles/domaine/typography.css'
import '../styles/domaine/color.css'

// Brand
const brandData = await sanityClient.fetch(`*[_type == "type_agencyBrand" && name == "Domaine"]`)
const brandSettings = brandData[0]

---
<LayoutGlobal
    title={`${title ? title : "Home"} | ${seoSettings.metafields.title}`}
    description={ description ? description : seoSettings.description }
    theme="light"
    favicon={brandSettings.favicon}
    image={image ? image : seoSettings.metafields.image}
    backgroundColor={backgroundColor}
    foregroundColor={foregroundColor}
>
    <Header
        navigationLinks={headerSettings.navigationLinks}
    />
    <main>
        <slot />
    </main>
    <Footer 
        footerLinks={footerSettings.footerLinks}
    />
</LayoutGlobal>