---
import Layout from '../../layouts/Layout.astro';
import BlogPostHero from '../../components/sections/blog/blogPost/BlogPostHero.astro';
import BlogPostSidebar from '../../components/sections/blog/blogPost/BlogPostSidebar.astro';
import BlogPostBody from '../../components/sections/blog/blogPost/BlogPostBody.astro';
import { getBlogPosts, urlFor } from '../../utils/sanityClient';


interface Props {
	data: any;
}

export const prerender = true;

export async function getStaticPaths() {

  const posts = await getBlogPosts();

  return posts.map((post) => {
    return {
      params: { slug: post.slug.current },
      props: { data: post }
    }
  })
}

const { slug } = Astro.params;
const { data } = Astro.props;
console.log(data)
---

<Layout 
    title="Insights"
    theme="light"
>
    <BlogPostHero
      title={data.title}
      excerpt={data.excerpt}
      image={data.mainImage}
      category={data.category}
      authors={data.authors}
      date={data.publishedAt}
    />
    <BlogPostBody />
    <BlogPostSidebar />

</Layout>

<style>
</style>
